Generate a production‑ready Admin Panel for DutchThrift with Role‑Based Access Control (RBAC) using the following spec. Prefer clean, minimal UI, TypeScript everywhere, and clear separation of concerns. Provide complete code, setup steps, and seed data.

Tech Stack

Frontend: React 18 + Vite + TypeScript + Tailwind CSS + shadcn/ui (Radix UI), React Router

Backend: Node.js 20 + Express (TypeScript)

Auth & DB: Supabase (Postgres + Supabase Auth)

Testing: Vitest for unit tests, Playwright for basic e2e auth/guard checks

Tooling: ESLint + Prettier, dotenv for config

If making different choices improves security or simplicity with Supabase, you may propose them, but keep the final deliverable runnable on Replit.

Business Context

We run a recommerce business. Staff are assigned one of three roles:

Beheerder (ADMIN): Full access to all resources and settings.

Support (SUPPORT): Access only to Cases and Inbox.

Technicus (TECHNICUS): Access only to Reparaties.

The panel must let an admin add users and set their role. Non‑admins can’t change roles or access unauthorized modules.

Features & Requirements
Global

RBAC: Enforce at both UI (navigation, routes, components) and API (server middleware) levels.

Auth: Supabase Auth (email/password or magic link). Persist session; show user’s role in the header.

Audit Log: Record who did what and when (table audit_logs).

Error handling: Toasts and inline errors; 401/403 guard pages.

Accessibility: Keyboard navigation + aria labels for all actionable controls.

Modules

Dashboard Home: Role‑aware quick links and stats cards.

Gebruikers (User Management) (ADMIN only):

List, invite/create user (email, displayName), assign one role: ADMIN | SUPPORT | TECHNICUS.

Reset password / send magic link.

Filter/search by email/role.

Reparaties (TECHNICUS + ADMIN):

CRUD: id, sku, titel, status (OPEN, IN_BEWERKING, GEREPAREERD), assigned_to, notes, timestamps.

Kanban board by status and a table view.

Cases (SUPPORT + ADMIN):

CRUD: id, customer_email, subject, status (OPEN, WACHTEND, GESLOTEN), assigned_to, tags, timestamps.

Inbox (SUPPORT + ADMIN):

List/assign incoming messages (mock dataset + CRUD). Link messages to cases by case_id.

ADMIN can access everything.